(function(t){function e(e){for(var i,s,o=e[0],l=e[1],c=e[2],u=0,p=[];u<o.length;u++)s=o[u],Object.prototype.hasOwnProperty.call(r,s)&&r[s]&&p.push(r[s][0]),r[s]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(t[i]=l[i]);h&&h(e);while(p.length)p.shift()();return n.push.apply(n,c||[]),a()}function a(){for(var t,e=0;e<n.length;e++){for(var a=n[e],i=!0,o=1;o<a.length;o++){var l=a[o];0!==r[l]&&(i=!1)}i&&(n.splice(e--,1),t=s(s.s=a[0]))}return t}var i={},r={app:0},n=[];function s(e){if(i[e])return i[e].exports;var a=i[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=t,s.c=i,s.d=function(t,e,a){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)s.d(a,i,function(e){return t[e]}.bind(null,i));return a},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=e,o=o.slice();for(var c=0;c<o.length;c++)e(o[c]);var h=l;n.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"075d":function(t,e,a){"use strict";var i=a("16b3"),r=a.n(i);r.a},"07c1":function(t,e,a){},"16b3":function(t,e,a){},"35de":function(t,e,a){},"51b1":function(t,e,a){"use strict";var i=a("35de"),r=a.n(i);r.a},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var i=a("2b0e"),r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",[a("v-app-bar",{attrs:{app:"",light:"",color:"white"}},[a("div",{staticClass:"d-flex align-center"},[a("v-icon",{staticClass:"shrink mr-2",attrs:{alt:"Vuetify Logo",contain:"",width:"40"}},[t._v(" mdi-chart-timeline-variant ")])],1),a("v-toolbar-title",{staticClass:"title shrink mt-1 hidden-sm-and-down"},[t._v(" Dynamic Models ")]),a("v-spacer"),a("v-btn",{attrs:{to:"/",text:"",router:""}},[t._v("Home")]),a("v-btn",{attrs:{to:"/ecology",text:"",router:""}},[t._v("Ecology")]),a("v-btn",{attrs:{to:"/state",text:"",router:""}},[t._v("Demographic")]),a("v-btn",{attrs:{to:"/epi",text:"",router:""}},[t._v("Epidemiology")]),a("v-btn",{attrs:{to:"/econ",text:"",router:""}},[t._v("Economics")]),a("v-btn",{attrs:{to:"/property",text:"",router:""}},[t._v("Property")])],1),a("v-content",[a("router-view")],1)],1)},n=[],s={name:"App",data:function(){return{}}},o=s,l=a("2877"),c=a("6544"),h=a.n(c),u=a("7496"),p=a("40dc"),d=a("8336"),m=a("a75b"),f=a("132d"),v=a("2fa4"),y=a("2a7f"),b=Object(l["a"])(o,r,n,!1,null,null,null),g=b.exports;h()(b,{VApp:u["a"],VAppBar:p["a"],VBtn:d["a"],VContent:m["a"],VIcon:f["a"],VSpacer:v["a"],VToolbarTitle:y["a"]});var x=a("8c4f"),w=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{staticClass:"pa-0 pt-1",attrs:{fluid:""}},[a("v-layout",[a("v-flex",{staticClass:"pa-3 pt-5",attrs:{xs12:"",sm12:"",md6:"","offset-md3":"",lg6:"","offset-lg3":""}},[a("p",{staticClass:"mt-5 display-3"},[t._v(" Dynamic Models ")]),a("div",{staticClass:"mt-5"}),a("p",[t._v(" This website demonstrates the visualization and calculation of compartmental models in Javascript. All modelling is directly calculated in the web-browser ")])])],1)],1)},k=[],R={name:"Home"},V=R,P=a("a523"),C=a("0e8f"),$=a("a722"),O=Object(l["a"])(V,w,k,!1,null,null,null),F=O.exports;h()(O,{VContainer:P["a"],VFlex:C["a"],VLayout:$["a"]});var j=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{staticClass:"pa-0 pt-1",attrs:{fluid:""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs4:"",md4:"",lg3:""}},[a("v-card",{staticStyle:{height:"calc(100vh - 48px)",overflow:"auto"}},[a("v-card-text",[a("sliders",{attrs:{sliders:t.sliders,callback:t.changeGraph}})],1)],1)],1),a("v-flex",{attrs:{xs8:"",md8:"",lg9:""}},[a("v-card",{staticStyle:{height:"calc(100vh - 48px)",overflow:"auto"}},[a("v-card-title",{staticClass:"display-2 mt-5"},[a("p",{staticClass:"mt-5"}),t._v(" "+t._s(t.title)+" ")]),a("v-card-text",[a("div",{attrs:{id:"property-charts"}})])],1)],1)],1)],1)},S=[],G=a("b85c"),T=(a("c975"),a("d81d"),a("d3b7"),a("ddb0"),a("d4ec")),M=a("bee2"),A=a("1157"),_=a.n(A),I=a("30ef"),D=a.n(I),E=a("2ef0"),N=a.n(E),L=a("d4cd")(),z=a("a68e");function X(t,e,a){return{type:"line",data:{datasets:[]},options:{title:{display:!0,text:t},legend:{display:!0,position:"right"},maintainAspectRatio:!1,responsive:!0,scales:{xAxes:[{display:!0,type:"linear",position:"bottom",scaleLabel:{display:!0,labelString:e},ticks:{}}],yAxes:[{display:!0,type:"linear",scaleLabel:{display:!0,labelString:a}}]}}}}L.use(z);var B=["#4ABDAC","#FC4A1A","#F78733","#037584","#007849","#FAA43A","#60BD68","#F17CB0","#B2912F","#B276B2","#DECF3F","#F15854","#C08283","#dcd0c0","#E37222"],W=[];function K(t){var e=W.indexOf(t);return e<0&&(W.push(t),e=W.length-1),B[e%B.length]}var H=function(){function t(e){if(Object(T["a"])(this,t),this.config=e,this.id=e.id,this.$div=_()("#".concat(this.id)),this.$canvas=_()("<canvas>"),this.$div.append(this.$canvas),e.chartData?this.chartData=e.chartData:this.chartData=X(),N.a.has(this.config,"fn")&&(this.chartData.options.legend.display=!1),this.keys=[],this.fn=null,this.chart=new D.a(this.$canvas,this.chartData),console.log(this.config,N.a.get(this.config,"ylabel"),N.a.has(this.config,"ylabel")),this.setTitle(N.a.get(this.config,"title","")),this.setXLabel(N.a.get(this.config,"xlabel","")),this.setYLabel(N.a.get(this.config,"ylabel","")),N.a.has(this.config,"keys")){var a,i=Object(G["a"])(this.config.keys);try{for(i.s();!(a=i.n()).done;){var r=a.value;this.addDataset(r)}}catch(n){i.e(n)}finally{i.f()}}N.a.has(this.config,"fn")&&(this.fn=this.config.fn,this.addDataset(this.config.fn))}return Object(M["a"])(t,[{key:"getDatasets",value:function(){return this.chartData.data.datasets}},{key:"getChartOptions",value:function(){return this.chartData.options}},{key:"addDataset",value:function(t,e,a){var i=this.getDatasets(),r=[];if(e&&a)for(var n=0;n<e.length;n+=1)r.push({x:e[n],y:a[n]});var s=i.length,o={label:t,data:r,fill:!1,backgroundColor:K(s),borderColor:K(s),showLine:!0,pointRadius:0,borderWidth:2};return i.push(o),this.keys.push(t),this.chart.update(),s}},{key:"updateDataset",value:function(t,e,a){for(var i=[],r=0;r<e.length;r+=1)i.push({x:e[r],y:a[r]});var n=this.keys.indexOf(t),s=this.getDatasets()[n];s.data=i,this.chart.update()}},{key:"setTitle",value:function(t){var e=this.getChartOptions();e.title.text=t}},{key:"setXLabel",value:function(t){var e=this.getChartOptions();e.scales.xAxes[0].scaleLabel.labelString=t}},{key:"setYLabel",value:function(t){var e=this.getChartOptions();e.scales.yAxes[0].scaleLabel.labelString=t}}]),t}(),q=function(){function t(e){Object(T["a"])(this,t),this.chartWidgets={},this.$div=_()("#".concat(e)).empty()}return Object(M["a"])(t,[{key:"addChart",value:function(t){N.a.has(t,"markdown")&&this.$div.append(_()("<div>").addClass("narrow-column").append(L.render(t.markdown))),this.$div.append(_()("<div>").attr("id",t.id).addClass("chart"));var e=new H(t);this.chartWidgets[t.id]=e}},{key:"updateChart",value:function(t,e,a,i){this.chartWidgets[t].updateDataset(e,a,i)}},{key:"updateFromModel",value:function(t){var e,a=t.times,i=Object(G["a"])(N.a.values(this.chartWidgets));try{for(i.s();!(e=i.n()).done;){var r=e.value;if(r.fn){var n=r.config.xlims,s=n[0],o=n[1],l=(o-s)/100,c=N.a.range(s,o,l),h=N.a.map(c,t.fn[r.fn]);this.updateChart(r.id,r.fn,c,h)}else{var u,p=Object(G["a"])(r.keys);try{for(p.s();!(u=p.n()).done;){var d=u.value;if(d in t.solution){var m=t.solution[d];this.updateChart(r.id,d,a,m)}}}catch(f){p.e(f)}finally{p.f()}}}}catch(f){i.e(f)}finally{i.f()}}}]),t}(),J=a("262e"),U=a("2caf"),Y=(a("45fc"),a("6b93"),a("d0ad")),Q=a.n(Y);function Z(t,e,a,i){var r=e-i;return function(e){return r*Math.exp(a*(e-t)/r)+i}}var tt=function(){function t(e){Object(T["a"])(this,t),this.param=N.a.assign({},e),this.var={},this.solution={},this.auxVar={},this.dVar={},this.times=[],this.fn={},this.dt=1,this.yCutoff=1e10}return Object(M["a"])(t,[{key:"fillGuiParam",value:function(t){if(N.a.has(t,"label")||(t.label=N.a.startCase(t.key)),N.a.has(t,"max")&&!N.a.has(t,"interval")){var e=N.a.floor(Math.log10(t.max));t.interval=Math.pow(10,e-2)}t.value=this.param[t.key]}},{key:"getGuiParams",value:function(){}},{key:"importGuiParams",value:function(t){var e,a=Object(G["a"])(t);try{for(a.s();!(e=a.n()).done;){var i=e.value;"key"in i&&"value"in i&&(this.param[i.key]=parseFloat(i.value))}}catch(r){a.e(r)}finally{a.f()}}},{key:"getCharts",value:function(){}},{key:"initializeRun",value:function(){}},{key:"resetSolutions",value:function(){var t,e=Object(G["a"])(N.a.values(this.solution));try{for(e.s();!(t=e.n()).done;){var a=t.value;a.length=0}}catch(i){e.e(i)}finally{e.f()}}},{key:"getVec",value:function(){var t,e=[],a=Object(G["a"])(this.varKeys);try{for(a.s();!(t=a.n()).done;){var i=t.value;e.push(this.var[i])}}catch(r){a.e(r)}finally{a.f()}return e}},{key:"setVec",value:function(t){for(var e=0;e<t.length;e+=1)this.var[this.varKeys[e]]=t[e]}},{key:"getDVec",value:function(t){this.setVec(t),this.calcAuxVars(),this.calcDVars();var e,a=[],i=Object(G["a"])(this.varKeys);try{for(i.s();!(e=i.n()).done;){var r=e.value;a.push(this.dVar[r])}}catch(n){i.e(n)}finally{i.f()}return a}},{key:"calcAuxVars",value:function(){}},{key:"calcDVars",value:function(){}},{key:"integrateDtWithRungeKutta",value:function(){var t=this;this.integrator=new Q.a.System,this.integrator.setStart(0),this.integrator.setStop(this.dt),this.integrator.setInitX(this.getVec()),this.integrator.setFn((function(e){return t.getDVec(e)})),this.integrator.solve(),this.status=this.integrator.getStatus(),this.setVec(this.integrator.newX),this.calcAuxVars()}},{key:"pushToSolution",value:function(t){var e,a=Object(G["a"])(N.a.keys(t));try{for(a.s();!(e=a.n()).done;){var i=e.value;i in this.solution||(this.solution[i]=[]),isFinite(t[i])?this.solution[i].push(t[i]):this.solution[i].push(null)}}catch(r){a.e(r)}finally{a.f()}}},{key:"preRunCheck",value:function(){}},{key:"run",value:function(){var t=this;this.initializeRun(),this.calcAuxVars(),this.calcDVars(),this.resetSolutions(),this.times=N.a.range(0,this.param.time,this.dt),this.varKeys=N.a.keys(this.dVar),this.preRunCheck();var e,a=Object(G["a"])(this.times);try{for(a.s();!(e=a.n()).done;){var i=e.value;if(this.integrateDtWithRungeKutta(i,this.dt),this.pushToSolution(this.var),this.pushToSolution(this.auxVar),N.a.some(N.a.values(this.var),(function(e){return e>t.yCutoff})))break}}catch(r){a.e(r)}finally{a.f()}}}]),t}();function et(t,e,a){return e*t/(1-Math.pow(1+e,-a))}var at=function(t){Object(J["a"])(a,t);var e=Object(U["a"])(a);function a(){var t;Object(T["a"])(this,a);var i={initialProperty:6e5,deposit:15e4,interestRate:.05,mortgageLength:30,propertyGrowthRate:.045,initialRentPerMonth:2e3,rentInflationRate:.015,fundGrowthRate:6};return t=e.call(this,i),t.dt=1,t}return Object(M["a"])(a,[{key:"initializeRun",value:function(){this.param.time=this.param.mortgageLength;var t=this.param.initialProperty-this.param.deposit;this.param.mortgagePayment=et(t,this.param.interestRate,this.param.mortgageLength),this.var.property=this.param.initialProperty,this.var.principal=t,this.var.totalInterest=0,this.var.fund=this.param.deposit,this.var.rent=12*this.param.initialRentPerMonth,this.var.totalRent=0,this.var.totalPaidForFundAndRent=this.param.deposit,this.var.totalPaidForPropertyAndInterest=this.param.deposit}},{key:"calcAuxVars",value:function(){this.auxVar.interest=this.param.interestRate*this.var.principal,this.auxVar.fundPayment=this.param.mortgagePayment-this.var.rent,this.auxVar.fundPayment<0&&(this.auxVar.fundPayment=0),this.auxVar.interestPerMonth=this.auxVar.interest/12,this.auxVar.mortgagePaymentPerMonth=this.param.mortgagePayment/12,this.auxVar.rentPerMonth=this.var.rent/12,this.auxVar.fundPaymentPerMonth=this.auxVar.fundPayment/12,this.auxVar.propertyProfit=this.var.property-this.param.deposit-this.var.principal-this.var.totalInterest,this.auxVar.fundProfit=this.var.fund-this.param.deposit-this.var.totalRent}},{key:"calcDVars",value:function(){this.dVar.totalInterest=this.auxVar.interest,this.dVar.property=this.param.propertyGrowthRate*this.var.property,this.var.principal>=0?this.dVar.principal=-(this.param.mortgagePayment-this.auxVar.interest):this.dVar.principal=0,this.dVar.totalPaidForPropertyAndInterest=this.param.mortgagePayment,this.dVar.rent=this.param.rentInflationRate*this.var.rent,this.dVar.totalRent=this.var.rent,this.dVar.fund=this.param.fundGrowthRate*this.var.fund+this.auxVar.fundPayment,this.dVar.totalPaidForFundAndRent=this.auxVar.fundPayment+this.var.rent}},{key:"getGuiParams",value:function(){for(var t=[{key:"deposit",max:15e5},{comment:!0,key:"property parameters"},{key:"initialProperty",max:15e5},{key:"propertyGrowthRate",max:.18},{comment:!0,key:"morgtage parameters"},{key:"mortgageLength",max:100},{key:"interestRate",max:.18},{comment:!0,key:"investment fund parameters"},{key:"fundGrowthRate",max:.18},{comment:!0,key:"rent parameters"},{key:"rentInflationRate",max:.18},{key:"initialRentPerMonth",max:15e3}],e=0,a=t;e<a.length;e++){var i=a[e];this.fillGuiParam(i)}return t}},{key:"getCharts",value:function(){for(var t=[{title:"Property",id:"property-chart",markdown:"\nThere's that proverb which says rent money is dead money. But interest\nrepayments for a property is also dead money. Maybe that money could\nhave be better invested in a managed fund.\n\n\nSo what is better in the long run - investing in property or investing\nin managed funds?\n\n# Property\n\nThe problem is that it's hard to visualize interest repayments. So here\nwe provide a visual way to compare the difference in strategies, whilst\nallowing an exploration of assumptions of the world at large.\n\nThe first thing to do is express the changes in the property as a \ndifferential equation. Property grows as:\n\n$$\\frac{d}{dt}(property) = property*propertyGrowthRate$$\n\nNow, after we have paid off the deposit, we are left with the principal.\nFrom the principal, the interestRate and length of the mortgage,\nwe can calculate the mortgage payment per year:\n\n $$mortgagePayment =  \\frac{principal * interestRate}{1 - interestRate * (1 + interestRate)^{-years})}$$\n\nThe principal thus changes as:\n\n$$\\frac{d}{dt}(principal) = -(minimumPayment - principal * interestRate)$$\n\nFinally, the total interest is given:\n\n$$\\frac{d}{dt}(totalInterest) = principal * interestRate$$\n\n",keys:["property","totalInterest","principal","totalPaidForPropertyAndInterest","propertyProfit"]},{title:"Investment Fund",markdown:"\n# Invest Fund and Renting\n\nAn apt comparison is to compare a home-owner with a mortgage, with a\nrenter who invests in a managed fund. This way you can pit rental\npayments versus mortgage interest payments. And incorporate startup\namounts.\n\nMore importantly, you can see the return on investment, profit made on\nall payments, which should be the point of comparison. Of course, the\nfinal profitability will also depend on the costs of sale (for a\nproperty) and captial gains tax (for managed funds).\n\nThe actual result though depends very much on what you believe the\nfuture will be like (up to 30 years for mortgages). So it is important\nto see how the profit changes, when varying the four major variables\ndescribing the future:\n\n-   captial growth of the investment fund\n-   inflation which affects rental prices\n",id:"fund-chart",keys:["fund","totalRent","totalPaidForFundAndRent","fundProfit"]},{title:"Return on investment",markdown:"\n# Comparing the ROI\n\n",id:"roi-chart",keys:["propertyProfit","fundProfit","totalPaidForPropertyAndInterest","totalPaidForFundAndRent"]},{title:"Monthly Expenses",markdown:"\n# Monthly Expenses comparison\n\n",id:"monthly-chart",keys:["mortgagePaymentPerMonth","interestPerMonth","rentPerMonth","fundPaymentPerMonth"]}],e=0,a=t;e<a.length;e++){var i=a[e];i.xlabel="year"}return t}}]),a}(tt),it=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("p",{staticClass:"small mt-3 mb-1"},[t._v(" PARAMETERS ")]),a("div",{staticClass:"d-none d-md-block"},t._l(t.sliders,(function(e,i){return a("div",{key:i,staticStyle:{"margin-bottom":"-10px"}},["comment"in e?a("div",{staticClass:"mt-5 text-capitalize font-italic",staticStyle:{"margin-bottom":"10px","padding-top":"20px"}},[t._v(" "+t._s(e.label)+" ")]):a("v-container",{staticClass:"d-inline-flex pa-0",attrs:{fluid:""}},[a("div",{staticClass:"flex-grow-1 pt-2"},[t._v(" "+t._s(e.label)+" "),a("v-slider",{staticStyle:{"margin-top":"-10px"},attrs:{max:e.max,step:e.interval,"hide-details":""},on:{change:function(e){return t.change()}},model:{value:e.value,callback:function(a){t.$set(e,"value",a)},expression:"slider.value"}})],1),a("div",{staticClass:"pl-4 flex-grow-0"},[a("v-text-field",{staticClass:"pt-0",staticStyle:{width:"7em"},attrs:{type:"number",step:"any"},on:{keypress:function(e){return t.change()}},model:{value:e.value,callback:function(a){t.$set(e,"value",a)},expression:"slider.value"}})],1)])],1)})),0),a("div",{staticClass:"d-block d-md-none"},t._l(t.sliders,(function(e,i){return a("div",{key:i,staticStyle:{"margin-bottom":"-10px"}},["comment"in e?a("div",{staticClass:"mt-5 text-capitalize font-italic",staticStyle:{"margin-bottom":"10px","padding-top":"0px"}},[t._v(" "+t._s(e.label)+" ")]):a("div",[a("v-container",{staticClass:"d-inline-flex pa-0",attrs:{fluid:""}},[a("div",{staticClass:"flex-grow-1 pt-2"},[a("div",{staticClass:"ml-2"},[t._v(t._s(e.label))]),a("v-slider",{staticStyle:{"margin-top":"-10px"},attrs:{max:e.max,step:e.interval,"hide-details":""},on:{change:function(e){return t.change()}},model:{value:e.value,callback:function(a){t.$set(e,"value",a)},expression:"slider.value"}})],1)]),a("v-container",[a("div",{staticClass:"pl-0 flex-grow-0 mb-n2"},[a("v-text-field",{staticClass:"mt-n6 pt-0",attrs:{type:"number",step:"any"},on:{keypress:function(e){return t.change()}},model:{value:e.value,callback:function(a){t.$set(e,"value",a)},expression:"slider.value"}})],1)])],1)])})),0)])},rt=[],nt={name:"Sliders",props:{sliders:Array,callback:Function},methods:{change:function(){this.callback()}}},st=nt,ot=a("ba0d"),lt=a("8654"),ct=Object(l["a"])(st,it,rt,!1,null,null,null),ht=ct.exports;h()(ct,{VContainer:P["a"],VSlider:ot["a"],VTextField:lt["a"]});var ut={components:{Sliders:ht},data:function(){return{title:"Property vs Fund Analyzer",sliders:[]}},watch:{sliders:{handler:function(){this.changeGraph()},deep:!0}},mounted:function(){this.model=new at,this.sliders=this.model.getGuiParams(),this.chartsContainer=new q("property-charts");var t,e=Object(G["a"])(this.model.getCharts());try{for(e.s();!(t=e.n()).done;){var a=t.value;this.chartsContainer.addChart(a)}}catch(i){e.e(i)}finally{e.f()}this.changeGraph()},methods:{changeGraph:function(){this.model.importGuiParams(this.sliders),this.model.run(),this.chartsContainer.updateFromModel(this.model)}}},pt=ut,dt=(a("8c23"),a("b0af")),mt=a("99d9"),ft=Object(l["a"])(pt,j,S,!1,null,null,null),vt=ft.exports;h()(ft,{VCard:dt["a"],VCardText:mt["a"],VCardTitle:mt["b"],VContainer:P["a"],VFlex:C["a"],VLayout:$["a"]});var yt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{staticClass:"pa-0 pt-1",attrs:{fluid:""}},[a("v-layout",{attrs:{row:""}},[a("v-flex",{attrs:{xs4:"",md4:"",lg3:""}},[a("v-card",{staticClass:"text-sm-left text-md-left",staticStyle:{height:"calc(100vh - 48px)",overflow:"auto"}},[a("v-card-text",[a("sliders",{attrs:{sliders:t.sliders,callback:t.changeGraph}})],1)],1)],1),a("v-flex",{attrs:{xs8:"",md8:"",lg9:""}},[a("v-card",{staticStyle:{height:"calc(100vh - 48px)",overflow:"auto"}},[a("v-card-title",{staticClass:"display-1 mt-3"},[t._v(" "+t._s(t.title)+" ")]),a("v-card-text",{staticClass:"text-md-left text-lg-left text-sm-left"},[t._v(" These models represent the simplest types of models used in epidemiological modelling. "),a("div",{staticClass:"pa-3"}),a("v-select",{staticStyle:{width:"500px"},attrs:{items:t.modelNames,label:"Model Type"},on:{change:t.changeModel},model:{value:t.modelName,callback:function(e){t.modelName=e},expression:"modelName"}}),a("div",{attrs:{id:"epi-charts"}})],1)],1)],1)],1)],1)},bt=[],gt=(a("7db0"),a("b0c0"),a("96cf"),a("1da1")),xt=a("45eb"),wt=a("7e84"),kt=(a("caad"),a("2532"),a("3835")),Rt=function(t){Object(J["a"])(a,t);var e=Object(U["a"])(a);function a(){var t;return Object(T["a"])(this,a),t=e.call(this),t.auxVarFlows=[],t.paramFlows=[],t.dt=1,t}return Object(M["a"])(a,[{key:"calcDVars",value:function(){var t,e=[],a=Object(G["a"])(this.auxVarFlows);try{for(a.s();!(t=a.n()).done;){var i=Object(kt["a"])(t.value,3),r=i[0],n=i[1],s=i[2],o=this.auxVar[s]*this.var[r];e.push([r,n,o])}}catch(V){a.e(V)}finally{a.f()}var l,c=Object(G["a"])(this.paramFlows);try{for(c.s();!(l=c.n()).done;){var h=Object(kt["a"])(l.value,3),u=h[0],p=h[1],d=h[2],m=this.param[d]*this.var[u];e.push([u,p,m])}}catch(V){c.e(V)}finally{c.f()}var f,v=Object(G["a"])(N.a.keys(this.dVar));try{for(v.s();!(f=v.n()).done;){var y=f.value;this.dVar[y]=0}}catch(V){v.e(V)}finally{v.f()}for(var b=0,g=e;b<g.length;b++){var x=Object(kt["a"])(g[b],3),w=x[0],k=x[1],R=x[2];this.dVar[w]-=R,this.dVar[k]+=R}}},{key:"preRunCheck",value:function(){this.calcAuxVars(),this.calcDVars();var t,e=N.a.keys(this.auxVar),a=Object(G["a"])(this.auxVarFlows);try{for(a.s();!(t=a.n()).done;){var i=t.value,r=i[2];N.a.includes(e,r)||console.log("Error: ".concat(r," of this.auxVarFlows not ")+"found in this.calcAuxVars")}}catch(h){a.e(h)}finally{a.f()}var n,s=N.a.keys(this.param),o=Object(G["a"])(this.paramFlows);try{for(o.s();!(n=o.n()).done;){var l=n.value,c=l[2];N.a.includes(s,c)||console.log("Error: ".concat(c," of this.paramFlows not ")+"found in this.param")}}catch(h){o.e(h)}finally{o.f()}}}]),a}(tt),Vt=function(t){Object(J["a"])(a,t);var e=Object(U["a"])(a);function a(){var t;return Object(T["a"])(this,a),t=e.call(this),t.modelType="EPI",t.name="Base EPI Model",t.param={time:100,initialPopulation:5e4,initialPrevalence:3e3,recoverRate:.1,reproductionNumber:1.5,infectiousPeriod:10},t.var={susceptible:0,infectious:0},t}return Object(M["a"])(a,[{key:"calcAuxVars",value:function(){this.auxVar.population=N.a.sum(N.a.values(this.var)),this.auxVar.rateForce=this.param.contactRate/this.auxVar.population*this.var.infectious,this.auxVar.rn=this.var.susceptible/this.auxVar.population*this.param.reproductionNumber}},{key:"getGuiParams",value:function(){for(var t=[{key:"time",max:300},{key:"reproductionNumber",max:20,label:"R0"},{key:"infectiousPeriod",max:100,label:"Infectious Period (days)"},{key:"initialPrevalence",max:1e5,label:"Prevalence"},{key:"initialPopulation",max:1e5,label:"Initial Population"}],e=0,a=t;e<a.length;e++){var i=a[e];this.fillGuiParam(i)}return t}},{key:"getCharts",value:function(){var t=[{title:"COMPARTMENTS",id:"compartment-chart",keys:N.a.keys(this.var),xlabel:"days"},{title:"RN",id:"rn-chart",keys:["rn"],xlabel:"days",markdown:"\n$$R_n = \\frac{susceptible}{population} \\times R_0$$\n"}];return t}}]),a}(Rt),Pt=function(t){Object(J["a"])(a,t);var e=Object(U["a"])(a);function a(){var t;return Object(T["a"])(this,a),t=e.call(this),t.modelType="SIR",t.name="Susceptible Infectious Recovered",t.param={time:100,initialPopulation:5e4,initialPrevalence:3e3,infectiousPeriod:10,recoverRate:.1,reproductionNumber:3},t.var={susceptible:0,infectious:0,recovered:0},t.auxVarFlows.push(["susceptible","infectious","rateForce"]),t.paramFlows.push(["infectious","recovered","recoverRate"]),t}return Object(M["a"])(a,[{key:"initializeRun",value:function(){this.param.recoverRate=1/this.param.infectiousPeriod,this.param.contactRate=this.param.reproductionNumber*this.param.recoverRate,this.var.infectious=this.param.initialPrevalence,this.var.susceptible=this.param.initialPopulation-this.param.initialPrevalence,this.var.recovered=0}},{key:"getCharts",value:function(){var t=Object(xt["a"])(Object(wt["a"])(a.prototype),"getCharts",this).call(this);return t[0].markdown="\n$$\\frac{d}{dt}susceptible = - susceptible \\times forceOfInfection$$\n$$\\frac{d}{dt}infectious = - infectious \\times recoverRate + susceptible \\times forceOfInfection $$\n$$\\frac{d}{dt}recovered = infectious \\times recoverRate$$\n",t}}]),a}(Vt),Ct=function(t){Object(J["a"])(a,t);var e=Object(U["a"])(a);function a(){var t;return Object(T["a"])(this,a),t=e.call(this),t.modelType="SIS",t.name="Susceptible Infectious Susceptible",t.param={time:100,initialPopulation:5e4,initialPrevalence:3e3,recoverRate:.1,reproductionNumber:3,infectiousPeriod:10},t.var={susceptible:0,infectious:0},t.auxVarFlows.push(["susceptible","infectious","rateForce"]),t.paramFlows.push(["infectious","susceptible","recoverRate"]),t}return Object(M["a"])(a,[{key:"initializeRun",value:function(){this.param.recoverRate=1/this.param.infectiousPeriod,this.param.contactRate=this.param.reproductionNumber*this.param.recoverRate,this.var.infectious=this.param.initialPrevalence,this.var.susceptible=this.param.initialPopulation-this.param.initialPrevalence}}]),a}(Vt),$t=function(t){Object(J["a"])(a,t);var e=Object(U["a"])(a);function a(){var t;return Object(T["a"])(this,a),t=e.call(this),t.modelType="SEIR",t.name="Susceptible Exposed Infections Recovered",t.param={time:500,initialPopulation:5e4,incubationRate:.01,caseFatality:.2,initialPrevalence:5e3,reproductionNumber:4,infectiousPeriod:10},t.var={susceptible:0,exposed:0,infectious:0,recovered:0,dead:0},t.auxVarFlows.push(["susceptible","exposed","rateForce"]),t.paramFlows.push(["exposed","infectious","incubationRate"]),t.paramFlows.push(["infectious","infectious","negativeDeathRate"]),t.paramFlows.push(["infectious","recovered","recoverRate"]),t.paramFlows.push(["infectious","dead","deathRate"]),t}return Object(M["a"])(a,[{key:"initializeRun",value:function(){this.param.deathRate=this.param.caseFatality/this.param.infectiousPeriod,this.param.recoverRate=1/this.param.infectiousPeriod-this.param.deathRate,this.param.negativeDeathRate=-this.param.deathRate,this.param.contactRate=this.param.reproductionNumber/this.param.infectiousPeriod;var t,e=Object(G["a"])(N.a.keys(this.var));try{for(e.s();!(t=e.n()).done;){var a=t.value;this.var[a]=0}}catch(i){e.e(i)}finally{e.f()}this.var.infectious=this.param.initialPrevalence,this.var.susceptible=this.param.initialPopulation-this.param.initialPrevalence}},{key:"getGuiParams",value:function(){for(var t=[{key:"time",max:1e3},{key:"reproductionNumber",max:15,label:"R0"},{key:"infectiousPeriod",max:100,label:"Infectious Period (days)"},{key:"caseFatality",max:1,label:"Case-Fatality Rate"},{key:"initialPrevalence",interval:1,label:"Prevalence"},{key:"initialPopulation",max:1e5,label:"Initial Population"}],e=0,a=t;e<a.length;e++){var i=a[e];this.fillGuiParam(i)}return t}}]),a}(Vt),Ot=function(t){Object(J["a"])(a,t);var e=Object(U["a"])(a);function a(){var t;return Object(T["a"])(this,a),t=e.call(this),t.modelType="SEIRS",t.name="Susceptible Exposed Infections Recovered Susceptible",t.param={time:1500,initialPopulation:5e4,incubationRate:.01,caseFatality:.2,initialPrevalence:3e3,reproductionNumber:5,immunityPeriod:50,infectiousPeriod:10},t.var={susceptible:0,exposed:0,infectious:0,recovered:0,dead:0},t.auxVarFlows.push(["susceptible","exposed","rateForce"]),t.paramFlows.push(["exposed","infectious","incubationRate"]),t.paramFlows.push(["infectious","infectious","negativeDeathRate"]),t.paramFlows.push(["infectious","recovered","recoverRate"]),t.paramFlows.push(["recovered","susceptible","immunityLossRate"]),t.paramFlows.push(["infectious","dead","deathRate"]),t}return Object(M["a"])(a,[{key:"initializeRun",value:function(){this.param.deathRate=this.param.caseFatality/this.param.infectiousPeriod,this.param.negativeDeathRate=-this.param.deathRate,this.param.recoverRate=1/this.param.infectiousPeriod-this.param.deathRate,this.param.contactRate=this.param.reproductionNumber/this.param.infectiousPeriod,this.param.immunityLossRate=1/this.param.immunityPeriod;var t,e=Object(G["a"])(N.a.keys(this.var));try{for(e.s();!(t=e.n()).done;){var a=t.value;this.var[a]=0}}catch(i){e.e(i)}finally{e.f()}this.var.infectious=this.param.initialPrevalence,this.var.susceptible=this.param.initialPopulation-this.param.initialPrevalence}},{key:"getGuiParams",value:function(){for(var t=[{key:"time",max:3e3},{key:"reproductionNumber",max:20,label:"R0"},{key:"infectiousPeriod",max:100,label:"Infectious Period (days)"},{key:"caseFatality",max:1,label:"Case-Fatality Rate"},{key:"immunityPeriod",max:300},{key:"initialPrevalence",max:1e5,label:"Prevalence"},{key:"initialPopulation",max:1e5,label:"Initial Population"}],e=0,a=t;e<a.length;e++){var i=a[e];this.fillGuiParam(i)}return t}}]),a}(Vt),Ft=[Pt,Ct,$t,$t,Ot],jt={components:{Sliders:ht},data:function(){return{title:"Graphing Models",sliders:[],modelName:"",modelNames:[]}},watch:{sliders:{handler:function(){this.changeGraph()},deep:!0}},mounted:function(){var t=this;return Object(gt["a"])(regeneratorRuntime.mark((function e(){var a,i,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.title="Epidemiology Models",t.models=[],a=Object(G["a"])(Ft);try{for(a.s();!(i=a.n()).done;)r=i.value,t.models.push(new r)}catch(n){a.e(n)}finally{a.f()}t.modelNames=N.a.map(t.models,(function(t){return t.name})),t.modelName=t.modelNames[0],t.changeModel();case 7:case"end":return e.stop()}}),e)})))()},methods:{changeModel:function(){var t=this;this.model=N.a.find(this.models,(function(e){return e.name===t.modelName})),this.sliders=this.model.getGuiParams(),this.chartsContainer=new q("epi-charts");var e,a=Object(G["a"])(this.model.getCharts());try{for(a.s();!(e=a.n()).done;){var i=e.value;this.chartsContainer.addChart(i)}}catch(r){a.e(r)}finally{a.f()}this.changeGraph()},changeGraph:function(){this.model.importGuiParams(this.sliders),this.model.run(),this.chartsContainer.updateFromModel(this.model)}}},St=jt,Gt=(a("8820"),a("b974")),Tt=Object(l["a"])(St,yt,bt,!1,null,null,null),Mt=Tt.exports;h()(Tt,{VCard:dt["a"],VCardText:mt["a"],VCardTitle:mt["b"],VContainer:P["a"],VFlex:C["a"],VLayout:$["a"],VSelect:Gt["a"]});var At=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{staticClass:"pa-0 pt-1",attrs:{fluid:""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs4:"",md4:"",lg3:""}},[a("v-card",{staticStyle:{height:"calc(100vh - 48px)",overflow:"auto"}},[a("v-card-text",[a("sliders",{attrs:{sliders:t.sliders,callback:t.changeGraph}})],1)],1)],1),a("v-flex",{attrs:{xs8:"",md8:"",lg9:""}},[a("v-card",{staticStyle:{height:"calc(100vh - 48px)",overflow:"auto"}},[a("v-card-title",{staticClass:"display-2 mt-5"},[t._v(" "+t._s(t.title)+" ")]),a("v-card-text",[a("div",{attrs:{id:"econ-charts"}})])],1)],1)],1)],1)},_t=[],It=function(t){Object(J["a"])(a,t);var e=Object(U["a"])(a);function a(){var t;Object(T["a"])(this,a);var i={time:120,initialEmployedFraction:.9,productivityGrowthRate:.015,populationGrowthRate:.02,depreciationRate:.06,capitalAccelerator:3,baseInterestRate:.03,interestRateMultiplier:0};return t=e.call(this,i),t.modelType="Keen-Minsky Financial Instability Model",t.dt=.1,t.fn.wageChange=Z(.95,0,.5,-.01),t.fn.investmentChange=Z(.05,.05,1.75,0),t}return Object(M["a"])(a,[{key:"initializeRun",value:function(){this.var.wage=.8,this.var.productivity=1,this.var.population=50,this.var.debt=0,this.var.output=this.param.initialEmployedFraction*this.var.population*this.var.productivity}},{key:"calcAuxVars",value:function(){this.auxVar.labor=this.var.output/this.var.productivity,this.auxVar.laborFraction=this.auxVar.labor/this.var.population,this.auxVar.wages=this.var.wage*this.auxVar.labor,this.auxVar.debtRatio=this.var.debt/this.var.output,this.auxVar.interestRate=this.param.baseInterestRate+this.param.interestRateMultiplier*this.auxVar.debtRatio,this.auxVar.interest=this.auxVar.interestRate*this.var.debt,this.auxVar.profit=this.var.output-this.auxVar.wages-this.auxVar.interest,this.auxVar.wageShare=this.auxVar.wages/this.var.output,this.auxVar.bankShare=this.auxVar.interest/this.var.output,this.auxVar.profitShare=1-this.auxVar.wageShare-this.auxVar.bankShare,this.auxVar.capital=this.var.output*this.param.capitalAccelerator,this.auxVar.profitability=this.auxVar.profit/this.auxVar.capital,this.auxVar.investmentChange=this.fn.investmentChange(this.auxVar.profitability),this.auxVar.investment=this.auxVar.investmentChange*this.var.output,this.auxVar.borrow=this.auxVar.investment-this.auxVar.profit,this.auxVar.wageChange=this.fn.wageChange(this.auxVar.laborFraction)}},{key:"calcDVars",value:function(){this.dVar.output=this.var.output*(this.auxVar.investmentChange/this.param.capitalAccelerator-this.param.depreciationRate),this.dVar.wage=this.auxVar.wageChange*this.var.wage,this.dVar.productivity=this.param.productivityGrowthRate*this.var.productivity,this.dVar.population=this.param.populationGrowthRate*this.var.population,this.dVar.debt=this.auxVar.borrow}},{key:"getGuiParams",value:function(){for(var t=[{key:"time",max:300},{key:"initialEmployedFraction",max:1},{key:"productivityGrowthRate",max:.1},{key:"populationGrowthRate",max:.2},{key:"capitalAccelerator",max:10},{key:"depreciationRate",max:.1},{key:"baseInterestRate",max:.2},{key:"interestRateMultiplier",max:.2}],e=0,a=t;e<a.length;e++){var i=a[e];this.fillGuiParam(i)}return t}},{key:"getCharts",value:function(){return[{markdown:"\nThe Keen-Minksy model, developed by [Steve Keen](https://keenomics.s3.amazonaws.com/debtdeflation_media/papers/PaperPrePublicationProof.pdf), \nmodels the economy by converting basic macroeconomic identities into a set of\ncoupled differential equations.\n\nIt uses the economic arguments of the Goodwin Business cycle and\n the Minsky financial instability hypothesis to generate analytic forms that \n model the action of capitalists and bankers.\n\nThis is a powerful model that uses very clear and well-founded assumptions\nto demonstrate how economies fall into natural business cycles, and\nhow economies can collapse from runaway debt.\n\nThe source code to this implementation of the model can be found [here](https://github.com/boscoh/popjs/blob/master/src/modules/econ-models.js).\n\n### The Actors in the Economy\n\nIn this model, there are three actors - labor, capital and bank, and all\nthree affect the output of the total economy. The relationship \nbetween output, labor and capital are intertwined by these standard macro relationships \n\n$$output = labor \\times productivity$$\n$$capital = output \\times capitalAccelerator$$\n$$\\frac{d}{dt}(capital) = investment - depreciationRate \\times capital$$\n\nHowever further equations are needed to represent how investment relates to\nthe banking sector. \n\nSkipping ahead, the model generates the evolution of the incomes\n of labor (wages), capital (profit) and bank (interest), based purely\n on endogenous self-interacting dynamics.\n  \n                ",title:"Income of the 3 classes",id:"output-chart",keys:["wages","profit","interest"],xlabel:"year"},{markdown:"\nTo see the dynamics between the actors, it is easier to compare\nthe relative income, where population growth has been normalized. It\nis a key feature of the model that potentially, the banking sector\n will overwhelm the entire economy and drive down wages and profit.\n                ",title:"The Share between the Classes",id:"share-chart",keys:["wageShare","profitShare","bankShare"],xlabel:"year"},{markdown:"\n### The Workers\n\nIn our model, we have a typical population:\n\n$$\\frac{d}{dt}(population) = population \\times populationGrowthRate$$\n\nProductivity is assumed to increase steadily due to innovations in\ntechnology:\n\n$$\\frac{d}{dt}(productivity) = productivity \\times productivityGrowthRate$$\n\nThe number of employed workers - labor - depends on the other two actors\nin the economy. Labor\ndepends on how much capital is in the system, and changes in capital \ndepends on profitability, which in turn depends on wages:\n\n$$wages = labor \\times wage$$\n\nWe must explicitly introduce a model of how wage changes:\n\n$$\\frac{d}{dt}(wage) = wage \\times wageFunction \\left[ \\frac{labor}{population} \\right]$$\n\nWe use the Keen Wage Function that models the upward pressure on\nwave as the employment fraction approaches 1.\n                ",title:"The Keen Wage Function",id:"wagefn-chart",fn:"wageChange",xlims:[.6,1.05],ymin:0,xlabel:"Employed Fraction",ylabel:"Wage Change"},{markdown:"\nIt is precisely the difficulty of thinking through this coupling\nbetween labor, capital and bank that we need to build a set of dynamic \nequations to clarify their interactions.\n\nIn the resultant model, the population grows exponentially, but labor fluctuates with\nthe typical business cycle.\n",title:"Workers in the Population",id:"pop-chart",keys:["population","labor"],xlabel:"year"},{markdown:"\n### The Profit Drive of Capital\n\nThe behaviour of capitalists is modeled as a reaction to profitability.\n\n$$profit = output - wages - interest$$\n\n$$profitability = \\frac{profit}{capital}$$\n\nBased on the Minsky Hypothesis, a capitalist will want to invest\n more when the profitability is positive. This can be expressed\n through the Keen Investment Function that determines the desired\n investment as a function of profitability:\n                ",title:"The Keen Investment Function",id:"investfn-chart",fn:"investmentChange",xlims:[-.4,.15],ymin:0,xlabel:"profitability",ylabel:"Investment Change"},{markdown:"\nCapital will then borrow the money needed for this investment from\na bank, which will presumably generate further profits:\n\n$$borrow = investmentFunction\\left[profitability\\right] \\times output - profit$$\n\nThis allows the model to generate the investment and borrowing\nbehavior of the capitalist, and thus, we get the interest, which\nbecomes the income of the bank.\n                ",title:"What drives Investment",id:"investment-chart",keys:["profit","investment","borrow","interest"],xlabel:"year"},{markdown:"\n\n### The Bank\n\nOnce we can model capitalists' propensity to borrow, we have a model\nof the banking sector, and thus it's impact on the economy.\n\n$$\\frac{d}{dt}(debt) = interestRate \\times debt + borrow$$\n\nThis model assumes (unlike neoclassical models) that banks \ncreate new money and new debt, upon making a loan. This is the official position \ntaken by the [Bank of England](https://www.bankofengland.co.uk/-/media/boe/files/quarterly-bulletin/2014/money-creation-in-the-modern-economy.pdf?la=en&hash=9A8788FD44A62D8BB927123544205CE476E01654), and\nother central banks.\n  \nThe income of the bank is thus the interest generated from the debt:\n\n$$interest = interestRate \\times debt$$\n\nWhen combined with all the equations above, this finally results \nin this neat analytic form of the output changes:\n\n$$\\frac{d}{dt}(output) = output \\times \\left( \\frac{investmentFunction\\left[\\frac{profit}{capital}\\right]}{capitalAccelerator} - depreciationRate \\right)$$\n\nWe can now see that the business cycle oscillates, but accumulates\ndebt, until the debt runs away and overwhelms the system with\ninterest payments.\n                ",title:"The Banking system in the Economy",id:"debt-chart",keys:["debt","capital","output","interest"],xlabel:"year"}]}}]),a}(tt),Dt={components:{Sliders:ht},data:function(){return{title:"",sliders:[]}},mounted:function(){var t=this;return Object(gt["a"])(regeneratorRuntime.mark((function e(){var a,i,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.model=new It,t.title=t.model.modelType,t.sliders=t.model.getGuiParams(),t.chartsContainer=new q("econ-charts"),a=Object(G["a"])(t.model.getCharts());try{for(a.s();!(i=a.n()).done;)r=i.value,t.chartsContainer.addChart(r)}catch(n){a.e(n)}finally{a.f()}t.changeGraph();case 7:case"end":return e.stop()}}),e)})))()},methods:{changeGraph:function(){this.model.importGuiParams(this.sliders),this.model.run(),this.chartsContainer.updateFromModel(this.model)}}},Et=Dt,Nt=(a("51b1"),Object(l["a"])(Et,At,_t,!1,null,null,null)),Lt=Nt.exports;h()(Nt,{VCard:dt["a"],VCardText:mt["a"],VCardTitle:mt["b"],VContainer:P["a"],VFlex:C["a"],VLayout:$["a"]});var zt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{staticClass:"pa-0",attrs:{fluid:""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs4:"",md4:"",lg3:""}},[a("v-card",{staticStyle:{height:"calc(100vh - 48px)",overflow:"auto"}},[a("v-card-text",[a("sliders",{attrs:{sliders:t.sliders,callback:t.changeGraph}})],1)],1)],1),a("v-flex",{attrs:{xs8:"",md8:"",lg9:""}},[a("v-card",{staticStyle:{height:"calc(100vh - 48px)",overflow:"auto"}},[a("v-card-title",{staticClass:"display-1 mt-3"},[t._v(" "+t._s(t.title)+" ")]),a("v-card-text",[a("div",{attrs:{id:"demo-charts",row:"",wrap:""}})])],1)],1)],1)],1)},Xt=[],Bt=function(t){Object(J["a"])(a,t);var e=Object(U["a"])(a);function a(){var t;Object(T["a"])(this,a);var i={time:600,maxSurplus:1,tax:1,populationGrowthRate:.02,expenditurePerCapita:.25,stateRevenueAtHalfCapacity:10,carryCapacityDiff:3};return t=e.call(this,i),t.modelType="Turchin Demographic Fiscal Model",t.dt=1,t}return Object(M["a"])(a,[{key:"initializeRun",value:function(){var t=this;this.fn.carryCapacityFromStateRevenue=function(e){return 1+t.param.carryCapacityDiff*(e/(t.param.stateRevenueAtHalfCapacity+e))},this.var.population=.2,this.var.revenue=0}},{key:"calcAuxVars",value:function(){var t=this.var.revenue>0?this.var.revenue:0;this.auxVar.carryingCapacity=this.fn.carryCapacityFromStateRevenue(t),this.auxVar.surplus=this.param.maxSurplus*(1-this.var.population/this.auxVar.carryingCapacity)}},{key:"calcDVars",value:function(){this.dVar.population=this.param.populationGrowthRate*this.var.population*this.auxVar.surplus,this.dVar.revenue=this.param.tax*this.var.population*this.auxVar.surplus-this.param.expenditurePerCapita*this.var.population,this.var.revenue<0&&this.dVar.revenue<=0&&(this.dVar.revenue=0,this.var.revenue=0)}},{key:"getGuiParams",value:function(){for(var t=[{key:"time",max:1e3},{key:"maxSurplus",max:2},{key:"tax",max:2},{key:"populationGrowthRate",max:.1},{key:"expenditurePerCapita",max:1},{key:"stateRevenueAtHalfCapacity",max:50}],e=0,a=t;e<a.length;e++){var i=a[e];this.fillGuiParam(i)}return t}},{key:"getCharts",value:function(){return[{title:"People",id:"people-chart",keys:["population","carryingCapacity"],xlabel:"year",markdown:"\n$$\\frac{d}{dt}population = populationGrowthRate \\times population \\times surplus $$\n"},{title:"Surplus",id:"surplus-chart",keys:["surplus"],xlabel:"year",markdown:"\n$$surplus = maxSurplus \\times \\left(  1 - \\frac{ population } { carryingCapacity } \\right) $$\n"},{title:"Revenue",id:"revenue-chart",keys:["revenue"],xlabel:"year",markdown:"\n$$\\frac{d}{dt}revenue = tax \\times population \\times surplus - expenditurePerCapita * population$$\n"},{title:"Carrying Capacity Function",id:"carry-capacity-chart",fn:"carryCapacityFromStateRevenue",xlims:[0,100],ymin:0,xlabel:"Revenue",ylabel:"Carrying Capacity",markdown:"\n$$ carryingCapacity = 1 + capacityDiff \\times \\left( \\frac{revenue}{ revenueAtHalfCapacity + revenue}  \\right)$$\n"}]}}]),a}(tt),Wt={components:{Sliders:ht},data:function(){return{title:"",sliders:[]}},mounted:function(){var t=this;return Object(gt["a"])(regeneratorRuntime.mark((function e(){var a,i,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.model=new Bt,t.title=t.model.modelType,t.sliders=t.model.getGuiParams(),t.chartsContainer=new q("demo-charts"),a=Object(G["a"])(t.model.getCharts());try{for(a.s();!(i=a.n()).done;)r=i.value,t.chartsContainer.addChart(r)}catch(n){a.e(n)}finally{a.f()}t.changeGraph();case 7:case"end":return e.stop()}}),e)})))()},methods:{changeGraph:function(){this.model.importGuiParams(this.sliders),this.model.run(),this.chartsContainer.updateFromModel(this.model)}}},Kt=Wt,Ht=(a("f8ab"),Object(l["a"])(Kt,zt,Xt,!1,null,null,null)),qt=Ht.exports;h()(Ht,{VCard:dt["a"],VCardText:mt["a"],VCardTitle:mt["b"],VContainer:P["a"],VFlex:C["a"],VLayout:$["a"]});var Jt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{staticClass:"pa-0",attrs:{fluid:""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs4:"",md4:"",lg3:""}},[a("v-card",{staticStyle:{height:"calc(100vh - 48px)",overflow:"auto"}},[a("v-card-text",[a("sliders",{attrs:{sliders:t.sliders,callback:t.changeGraph}})],1)],1)],1),a("v-flex",{attrs:{xs8:"",md8:"",lg9:""}},[a("v-card",{staticStyle:{height:"calc(100vh - 48px)",overflow:"auto"}},[a("v-card-title",{staticClass:"display-1 mt-3"},[t._v(" "+t._s(t.title)+" ")]),a("v-card-text",[a("div",{attrs:{id:"ecology-charts",row:"",wrap:""}})])],1)],1)],1)],1)},Ut=[],Yt=function(t){Object(J["a"])(a,t);var e=Object(U["a"])(a);function a(){var t;Object(T["a"])(this,a);var i={time:200,initialPrey:10,initialPredator:5,preyGrowthRate:.2,predationRate:.1,digestionRate:.1,predatorDeathRate:.2};return t=e.call(this,i),t.modelType="Lokta Volterra Predator-Prey Model",t.dt=.1,t}return Object(M["a"])(a,[{key:"initializeRun",value:function(){this.var.predator=this.param.initialPrey,this.var.prey=this.param.initialPredator}},{key:"calcDVars",value:function(){this.dVar.prey=this.var.prey*this.param.preyGrowthRate-this.param.predationRate*this.var.prey*this.var.predator,this.dVar.predator=this.param.digestionRate*this.var.prey*this.var.predator-this.var.predator*this.param.predatorDeathRate}},{key:"getGuiParams",value:function(){for(var t=[{key:"time",max:300},{key:"initialPrey",max:20},{key:"initialPredator",max:20},{key:"preyGrowthRate",max:2},{key:"predationRate",max:2},{key:"predatorDeathRate",max:2},{key:"digestionRate",max:2}],e=0,a=t;e<a.length;e++){var i=a[e];this.fillGuiParam(i)}return t}},{key:"getCharts",value:function(){return[{title:"Ecology",id:"predator-prey-chart",keys:["predator","prey"],xlabel:"year",markdown:"\n$$\\frac{d}{dt}prey = preyGrowthRate \\times prey  - predationRate \\times prey \\times predator$$ \n\n$$\\frac{d}{dt}predator = digestionRate \\times prey \\times predator - predatorDeathRate \\times predator$$\n"}]}}]),a}(tt),Qt={components:{Sliders:ht},data:function(){return{title:"",sliders:[]}},mounted:function(){var t=this;return Object(gt["a"])(regeneratorRuntime.mark((function e(){var a,i,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.model=new Yt,t.title=t.model.modelType,t.sliders=t.model.getGuiParams(),t.chartsContainer=new q("ecology-charts"),a=Object(G["a"])(t.model.getCharts());try{for(a.s();!(i=a.n()).done;)r=i.value,t.chartsContainer.addChart(r)}catch(n){a.e(n)}finally{a.f()}t.changeGraph();case 7:case"end":return e.stop()}}),e)})))()},methods:{changeGraph:function(){this.model.importGuiParams(this.sliders),this.model.run(),this.chartsContainer.updateFromModel(this.model)}}},Zt=Qt,te=(a("075d"),Object(l["a"])(Zt,Jt,Ut,!1,null,null,null)),ee=te.exports;h()(te,{VCard:dt["a"],VCardText:mt["a"],VCardTitle:mt["b"],VContainer:P["a"],VFlex:C["a"],VLayout:$["a"]}),i["a"].use(x["a"]);var ae=[{path:"/",name:"Home",component:F},{path:"/property",name:"Property",component:vt},{path:"/ecology",name:"Ecology",component:ee},{path:"/state",name:"State",component:qt},{path:"/epi",name:"Epi",component:Mt},{path:"/econ",name:"Econ",component:Lt}],ie=new x["a"]({routes:ae}),re=ie,ne=a("2f62");i["a"].use(ne["a"]);var se=new ne["a"].Store({state:{},mutations:{},actions:{},modules:{}}),oe=a("f309");i["a"].use(oe["a"]);var le=new oe["a"]({});i["a"].config.productionTip=!1,new i["a"]({router:re,store:se,vuetify:le,render:function(t){return t(g)}}).$mount("#app")},8656:function(t,e,a){},8820:function(t,e,a){"use strict";var i=a("c9a2"),r=a.n(i);r.a},"8c23":function(t,e,a){"use strict";var i=a("07c1"),r=a.n(i);r.a},c9a2:function(t,e,a){},d0ad:function(t,e,a){a("fb6a");var i=a("34eb")("rk45");e.System=function(){this.x0=null,this.fn=null,this.newX=null,this.h=.1,this.tol=1e-5,this.start=0,this.stop=1,this.R=null,this.delta=null,this.count=0,this.maxCount=2048,this.status={success:!1,state:"init",message:null}},e.System.prototype={setInitX:function(t){return this.x0=t},setFn:function(t){return this.fn=t},setStart:function(t){return this.start=t},setStop:function(t){return this.stop=t},setH:function(t){return this.h=t},setTol:function(t){return this.tol=t},setMaxCount:function(t){return this.maxCount=t},getStatus:function(){return this.status},checkSetUp:function(){return this.start>=this.stop?(this.status.state="error",this.start==this.stop?this.status.message="Stop time same as start time.":this.status.message="Stop time is less than start time.",this.status.state):this.h<=0?(this.status.state="error",0==this.h?this.status.message="h is zero but must be a positive number.":this.status.message="h is less than zero but must be a positive number.",this.status.state):"ok"},computeK:function(t){for(var e=t,a=this.newX.slice(),i=this.x0.length,r=new Array(i),n=this.fn(e,a),s=0;s<i;s++)r[s]=new Array(6),r[s][0]=this.h*n[s];e=t+this.h/4;for(var o=0;o<i;o++)a[o]=this.newX[o]+r[o][0]/4;for(var l=0;l<i;l++)r[l][1]=this.h*n[l];e=t+3*this.h/8;for(var c=0;c<i;c++)a[c]=this.newX[c]+(3*r[c][0]+9*r[c][1])/32;for(var h=0;h<i;h++)r[h][2]=this.h*n[h];e=t+12*this.h/13;for(var u=0;u<i;u++)a[u]=this.newX[u]+(1932*r[u][0]-7200*r[u][1]+7296*r[u][2])/2197;for(var p=0;p<i;p++)r[p][3]=this.h*n[p];e=t+this.h;for(var d=0;d<i;d++)a[d]=this.newX[d]+439*r[d][0]/216-8*r[d][1]+3680*r[d][2]/513-845*r[d][3]/4104;for(var m=0;m<i;m++)r[m][4]=this.h*n[m];e=t+this.h/2;for(var f=0;f<i;f++)a[f]=this.newX[f]-8*r[f][0]/27+2*r[f][1]-3544*r[f][2]/2565+1859*r[f][3]/4104-11*r[f][4]/40;for(var v=0;v<i;v++)r[v][5]=this.h*n[v];return r},solve:function(){if("ok"==this.checkSetUp()){var t=this.x0.length,e=this.start;this.newX=new Array(t),this.newX=this.x0,this.R=new Array(t),this.delta=new Array(t),this.count=0;while(e<this.stop){i("t: "+e+", newX: "+this.newX);for(var a=this.computeK(e),r=0;r<a.length;r++)i("k["+r+"]: "+a[r]);for(var n=0;n<t;n++)this.R[n]=Math.abs(a[n][0]/360-128*a[n][2]/4275-2197*a[n][3]/75240+a[n][4]/50+2*a[n][5]/55),this.R[n]=this.R[n]/this.h,this.delta[n]=.84*Math.pow(this.tol/this.R[n],.25);if(i("delta: "+this.delta+"; min: "+Math.min.apply(null,this.delta)),Math.max.apply(null,this.R)<=this.tol){i("Good to compute!"),e+=this.h;for(var s=0;s<t;s++)this.newX[s]=this.newX[s]+(25*a[s][0]/216+1408*a[s][2]/2565+2197*a[s][3]/4104-a[s][4]/5);this.h=this.h*Math.min.apply(null,this.delta)}else i("Need to adjust step size, max R: "+Math.max.apply(null,this.R)),i("Scale factor: "+Math.min.apply(null,this.delta)),this.h=this.h*Math.min.apply(null,this.delta);if(this.h>=this.stop-e&&(this.h=this.stop-e),this.count++>this.maxCount)break}this.count++>this.maxCount?(this.status.success=!1,this.status.state="error",this.status.message="Iteration count exceeded MAX count ("+this.maxCount+")"):e>=this.stop&&(this.status.success=!0,this.status.state="complete",this.status.message="Integration completed sucessfully.")}}}},f8ab:function(t,e,a){"use strict";var i=a("8656"),r=a.n(i);r.a}});
//# sourceMappingURL=app.e6146f33.js.map